<div class="row">
  <div class="col-xs-12 col-md-6 col-md-offset-3">
    <div *ngIf="isLoading">
      <app-loading></app-loading>
    </div>
    <!--
    <div *ngIf="errorMessage">
      <div class="alert alert-danger"><p>{{errorMessage}}</p></div>
    </div>
    -->
    <app-alert
      [message]="errorMessage"
      *ngIf="errorMessage"
      (close)="onHandleClose()">
    </app-alert>
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" *ngIf="!isLoading">
      <div class="form-group" [ngClass]="{'has-error': isFieldInvalid('email')}">
        <label for="email">E-mail</label>
        <input type="email" id="email" class="form-control" formControlName="email">
        <span *ngIf="isFieldInvalid('email')" class="has-error">
            <span *ngIf="loginForm.get('email').errors['required']">Email is required</span>
            <span *ngIf="loginForm.get('email').errors['email']">Invalid Email</span>
        </span>
      </div>
      <div class="form-group" [ngClass]="{'has-error': isFieldInvalid('password')}">
        <label for="password">Password</label>
        <input type="password" id="password" class="form-control" formControlName="password">
        <span *ngIf="isFieldInvalid('password')" class="has-error">
            <span *ngIf="loginForm.get('password').errors['required']">Password is required</span>
            <span *ngIf="loginForm.get('password').errors['minlength']">
              min length of password is {{loginForm.get('password').errors['minlength'].requiredLength}} chars
            </span>
        </span>
      </div>
      <div>
        <button class="btn btn-primary"
                type="submit"
                [disabled]="!loginForm.valid && loginForm.touched"
                [innerHTML]="isLoginMode ? 'Login' : 'Sign Up'">
        </button>
        <button class="btn btn-default"
                type="button"
                (click)="onSwitchMode()"
                [innerHTML]="isLoginMode ? 'Switch to Sign Up' : 'Switch  to Login'">
        </button>
      </div>
    </form>
  </div>
</div>
